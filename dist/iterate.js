"use strict";!function(){var t=require("iterate-js-lite");t.chain=function(){return new e},t.render={blend:function(t,i,n){var e=parseInt(t.slice(1),16),r=parseInt(i.slice(1),16),s=e>>16,a=e>>8&255,o=255&e,u=r>>16,c=r>>8&255,l=255&r;return"#"+(16777216+65536*(Math.round((u-s)*n)+s)+256*(Math.round((c-a)*n)+a)+(Math.round((l-o)*n)+o)).toString(16).slice(1)},hexToRGBL:function(t){var i={red:0,green:0,blue:0,luminosity:0},n=t.toString().replace("#",""),e=parseInt(n,16);return i.red=e>>16&255,i.green=e>>8&255,i.blue=e>>0&255,i.luminosity=.2126*i.red+.7152*i.green+.0722*i.blue,i},bytesToImageSrc:function(t,i){return"data:image/{0};base64,{1}".format(i?i:"png",t)},bytesToCanvas:function(t,i,n,e){for(var r=n.getContext("2d"),s=t,a=s.length,o=[a];a--;)o[a]=String.fromCharCode(s[a]);var u=o.join(""),c=window.btoa(u),l=new Image;l.src="data:image/{0};base64,{1}".format(i?i:"png",c),l.onload=function(){console.log("Image Onload"),r.drawImage(l,e[0],e[1],n.width,n.height)},l.onerror=function(t){console.log("Img Onerror:",t)}}};var i=t["class"](function(){this.map=new WeakMap},{context:function(t,i){return i(this.map.get(t))},bind:function(i,n){this.map.set(i,t.is.object(n)?n:{})},get:function(i,n){return t.prop(this.map.get(i),n)},set:function(i,n,e){var r=n.split(".");if(r.length>0){var s=r.pop(),a=this.map.get(i);t.all(r,function(i){t.is.set(a[i])||(a[i]={}),a=a[i]}),a[s]=e}}}),n=t["class"](function(t){this.isObject=!1,this.isArray=!1,this.isFunction=!1,this.isString=!1,this.isNumber=!1,this.isBoolean=!1,this.isDate=!1,this.isArguments=!1,this.isNull=!1,this.isUndefined=!1,this.isNaN=!1,this.isRegExp=!1,this.read(t)},{isIterable:{get:function(){return this.isArray||this.isObject||this.isNumber||this.isString||this.isArguments}},isSameType:function(i){return t.is.sameType(this.value,i)},read:function(t){this.initial=t,this.value=t},value:{get:function(){return this._value},set:function(i){var n=this,e=!1,r="";n._value=i,t.all(t.types,function(s,a){e=!1,r=s,"nan"==a?(r="NaN",e=t.is.nan(i)):e="obj"==a?t.is.object(i):"integer"==a?t.is.number(i):t.is[a](i),n["is"+r]=e})}}}),e=t["class"](function(){this.actions=[],this.data=new n},{action:function(t){return this.actions.push(t.bind(this)),this},all:function(i){return this.action(function(n){n.isIterable&&t.all(n.value,i)})},append:function(t){return this.action(function(i){i.isArray?i.value.push(t):i.isString&&(i.value+=t)})},average:function(i){return this.action(function(n){n.isIterable&&(n.value=t.math.average(n.value,i))})},contains:function(i){return this.action(function(n){n.isIterable&&(n.value=t.contains(n.value,i))})},count:function(i){return this.action(function(n){n.isIterable&&(n.value=t.count(n.value,i))})},"default":function(t){return this.action(function(i){i.isSet||(i.value=t)})},distinct:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.distinct(n.value,i))})},"else":function(t,i){return this.action(function(n){t||i(n)})},equals:function(t){return this.action(function(i){i.value=i.value==t})},execute:function(i){var n=this;return n.data.read(i),t.all(n.actions,function(t,i,e){t(n.data,i,e)}),n.data},filter:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.filter(n.value,i))})},first:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.first(n.value,i))})},group:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.group(n.value,i))})},last:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.last(n.value,i))})},"if":function(t,i){return this.action(function(n){t&&i(n)})},intersect:function(i,n){return this.action(function(e){(e.isArray||e.isObject)&&(e.value=t.intersect(e.value,i,n))})},is:function(t){return this.action(function(i){i.value=i.value===t})},map:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.map(n.value,i))})},max:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.math.max(n.value,i))})},median:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.math.median(n.value,i))})},min:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.math.min(n.value,i))})},preappend:function(t){return this.action(function(i){i.isArray?i.value.unshift(t):i.isString&&(i.value=t+i.value)})},prop:function(i,n){return this.action(function(e){e.isSet&&(t.is.set(n)?t.prop(e.value,i,n):e.value=t.prop(e.value,i))})},search:function(i){return this.action(function(n){n.isIterable&&(n.value=t.search(n.value,i))})},sort:function(i){return this.action(function(n){n.isArray&&(n.value=t.sort(n.value,i))})},sum:function(i){return this.action(function(n){(n.isArray||n.isObject)&&(n.value=t.math.sum(n.value,i))})}}),r=t["class"](function(i,n){var e={},r={};t.all(i,function(t,i){i.length>1?r[i]=t:e[i]=t}),this.keyChars=e,this.keyWords=r,this.options=n?n:{}},{parse:function(i){var n=this,e=t.options({skip:0,bubble:!0,ignoreCase:!0,defaultAction:function(){}}),r="",s=0,a=function(){},o=!1;t.all(i,function(u,c){return e.skip>0?e.skip--:(e.bubble=!0,o=!1,r=u,s=parseInt(c),a=n.keyChars[r],t.is["function"](a)&&(a(r,s,i,e),o=!0),t.all(n.keyWords,function(n,u){if((e.bubble||!o)&&(u[0]&&e.ignoreCase?u[0].toLowerCase():u[0])==(r&&e.ignoreCase?r.toLowerCase():r)){var c=!0,l="";t.all(u,function(t,n){l=i[s+parseInt(n)],(t&&e.ignoreCase?t.toLowerCase():t)!=(l&&e.ignoreCase?l.toLowerCase():l)&&(c=!1)}),c&&(a=n,void 0!=a&&(e.skip=u.length-1,a(u,s,i,e),o=!0))}}),void(o||e.defaultAction(r,s,i,e)))})}}),s=t["class"](function(i){t.lib.Updatable.call(this),this.update(i)},{asObject:{get:function(){return t.map(this,function(t,i,n){return"_identifier"==i&&(n.skip=!0),{key:i,value:t}},{build:{}})}},asString:{get:function(){var i="";return t.all(this,function(t,n){t&&"_identifier"!=n&&(i+="{0}:{1};".format(n,t))}),i}},clear:function(){var i=this;t.all(i,function(t,n){"_identifier"!=n&&i.remove(n)})},remove:function(t){delete this[t]},update:function(i){var n=this;if(t.is.string(i)){var e=i.split(";");t.all(e,function(t){if(""!=t){var i=t.split(/:(.+)/);n[i[0].trim()]=i[1].trim()}})}else t.is.object(i)&&t.fuse(n,i)}},t.lib.Updatable),a=t["class"](function(i){t.lib.Updatable.call(this),this.update(i)},{asObject:{get:function(){return t.map(this,function(t,i,n){return"_identifier"==i&&(n.skip=!0),{key:i,value:t}},{build:{}})}},asString:{get:function(){var i="";return t.all(this,function(t,n){t&&"_identifier"!=n&&(i+='{0}="{1}" '.format(n,t))}),i}},clear:function(){var i=this;t.all(i,function(t,n){"_identifier"!=n&&i.remove(n)})},remove:function(t){delete this[t]},update:function(i){var n=this;if(t.is.string(i)){var e=style.split(" ");t.all(e,function(t){if(""!=t){var i=t.split("=");n[i[0].trim()]=i[1].replace('"',"").trim()}})}else t.is.object(i)&&t.fuse(n,i)}},t.lib.Updatable),o=t["class"](function(i){t.lib.Updatable.call(this),this._registry={},this.update(i)},{update:function(i,n){var e=this;t.is.object(i)&&(t.fuse(e,i,{deep:Boolean(n)}),t.all(e._registry,function(n,r,s){t.is["function"](n)&&n(e,i)}))},clear:function(){var i=this;t.all(i,function(t,n){"_registry"!=n&&"_identifier"!=n&&delete i[n]})},handler:function(t,i){i?this._registry[t]=i:delete this._registry[t]}},t.lib.Updatable),u=t["class"](function(i){t.lib.Updatable.call(this),this.hooks={},this.update(i)},{add:function(i,n){var e=i.toLowerCase();t.is.set(this.hooks[e])||(this.hooks[e]=[]),t.is.array(n)?this.hooks[e]=this.hooks[e].concat(n):this.hooks[e].push(n)},delegate:function(i,n,e){var r=i.toLowerCase(),s=this.hooks[r];if(t.is.array(s)){var n={event:r,before:!0,after:!1,isCancelled:!1,data:n};return t.all(s,function(t){setTimeout(function(){t(n)},e?e:10)}),function(){n.before=!1,n.after=!0,n.isCancelled||t.all(s,function(t){setTimeout(function(){t(n)},e?e:10)})}}},on:function(t,i){this.add(t,i)},off:function(t,i){this.remove(t,i)},read:function(i){var n="",e=this;t.all(i,function(r,s){n=s.toLowerCase(),"on"==n.substring(0,2)&&"on"!=n&&t.is["function"](r)&&e.add(n.replace("on",""),r.bind(i))},!0)},remove:function(i,n){if(i){var e=i.toLowerCase();t.is.set(n)?this.hooks[e]=t.remove(this.hooks[e],n):delete this.hooks[e]}else{var r=this;t.all(r.hooks,function(t,i){delete r.hooks[i]})}},trigger:function(i,n){var e=i.toLowerCase(),r=this.hooks[e];if(t.is.array(r)){var n={event:e,before:!0,after:!1,isCancelled:!1,data:n};return t.all(r,function(t){t(n)}),function(){n.before=!1,n.after=!0,n.isCancelled||t.all(r,function(t){t(n)})}}return function(){}},update:function(i){var n=this;t.is.object(i)&&t.all(i,function(t,i){n.add(i,t)})}},t.lib.Updatable),c=t["class"](function(i){t.lib.Updatable.call(this),this._active=null,this.views=[],this.onViewChange=function(t){},this.update(i);var n=this.defaultView;n&&(this.activeView=n)},{activeView:{get:function(){return this._active},set:function(i){i&&(t.all(this.views,function(t){t.active=t.name==i.name}),this._active=i,this.onViewChange(i))}},defaultView:{get:function(){return t.search(this.views,function(t){return t["default"]})}},getView:function(i){return t.search(this.views,function(t){return t.name==i})},setView:function(t){this.activeView=this.getView(t)},update:function(i){t.is.object(i)&&t.fuse(this,i)}},t.lib.Updatable),l=t["class"](function(t){this.defaults=t},{all:function(i){var n=this;return t.map(i,function(t){return n.create(t)})},create:function(i){var n=t.fuse(this.cloneDefaults(),i);return t.all(n,function(i,e){t.is["function"](i)&&(n[e]=i.bind(n))}),n},cloneDefaults:function(){return t.fuse({},this.defaults,{deep:!0})}}),f=t["class"](function(i){t.lib.Updatable.call(this);var n=this;n.array=[],n.config=new o({array:[],model:null,multiselect:!1,selection:null,eval:void 0,map:void 0,filter:void 0,sort:void 0,onRefresh:function(){}}),n.maps={range:function(t,i){var n=t,e=i;return function(t,i,r){return i<n&&(r.skip=!0),i>=e&&(r.skip=r.stop=!0),t}},limit:function(t){var i=t;return function(t,n,e){return n>=i&&(e.skip=e.stop=!0),t}},selected:function(){return function(t,i,n){return t.selected||(n.skip=!0),t}},hidden:function(){return function(t,i,n){return t.hidden&&(n.skip=!0),t}}},n.refresh=t.debounce(function(){var i=n.config.array;return t.is.set(n.config.filter)&&(i=t.filter(i,n.config.filter)),t.is.set(n.config.sort)&&(i=t.sort(i,n.config.sort)),t.is.set(n.config.map)&&(i=t.map(i,n.config.map)),t.is.set(n.config.eval)&&(i=t.all(i,n.config.eval)),n.array=i,n.config.onRefresh(n),n},50),n.update(i)},{add:function(i){return t.is.array(i)?this.config.array=this.config.array.slice().concat(i):this.config.array.push(i),this.refresh(),this},addAt:function(i,n){return t.is.array(i)?Array.prototype.splice.apply(this.config.array,[n,0].concat(i)):this.config.array.splice(n,0,i),this.refresh(),this},addNew:function(i){var n=this;return t.is.array(i)?t.all(i,function(t){return n.addNew(t)}):t.is.object(n.config.model)?n.add(n.config.model.create(i)):t.is["function"](n.config.model)&&n.add(new n.config.model(i)),this},at:function(t){return this.config.array[t]},chain:{get:function(){return t.chain(this.config.array)}},clear:function(){return this.array=[],this.config.array=[],this.refresh(),this},contains:function(i){return t.contains(this.config.array,i)},count:{get:function(){return this.config.array.length}},each:function(i){t.all(this.config.array)},eval:function(i){return t.is["function"](i)?this.config.eval=i:this.config.eval=void 0,this.refresh(),this},filter:function(i){return t.is["function"](i)?this.config.filter=i:this.config.filter=void 0,this.refresh(),this},first:{get:function(){return this.array[0]}},index:function(i,n){return t.index(this.config.array,i,n)},indexOf:function(t){return this.config.array.indexOf(t)},last:{get:function(){return this.array[this.array.length-1]}},map:function(i){return t.is["function"](i)?this.config.map=i:this.config.map=void 0,this.refresh(),this},move:function(t,i){return this.config.array.splice(i,0,this.config.array.splice(t,1)[0]),this.refresh(),this},remove:function(t){var i=this.indexOf(t);return i>-1&&this.removeAt(i),this},removeAt:function(t){return this.config.array.splice(t,1),this.refresh(),this},search:function(i){return t.search(this.config.array,i)},sort:function(i){return t.is.set(i)?this.config.sort=i:this.config.sort=void 0,this.refresh(),this},select:function(i){return this.multiselect||this.toggle(this.config.array,"selected",!1),this.toggle(i,"selected",!0),this.config.selection=t[this.multiselect?"filter":"search"](this.config.array,function(t){return t.selected}),this},unselect:function(i){return this.multiselect||this.toggle(this.config.array,"selected",!1),this.toggle(i,"selected",!1),this.config.selection=t[this.multiselect?"filter":"search"](this.config.array,function(t){return t.selected}),this},toggle:function(i,n,e){var r=n?n:"hidden";t.is.array(i)?t.all(i,function(t){return t[r]=void 0!=e?e:!t[r]}):t.is.object(i)&&(i[r]=void 0!=e?e:!i[r])},update:function(i){return t.is.array(i)?this.config.array=i:t.is.object(i)&&this.config.update(i),this.refresh(),this}},t.lib.Updatable),h=t["class"](function(i){var n=this;n.lastStarted=0,n.lapsedTime=0,n.clock=null,n.settings=t.options({onTick:function(t){},tickRate:500},i),n.update=function(){n.settings.onTick(n.getTime())},n.start=function(){n.clock=setInterval(n.update,n.settings.tickRate),n.lastStarted=n.lastStarted?n.lastStarted:n.now()},n.stop=function(){n.lapsedTime=n.lastStarted?n.lapsedTime+n.now()-n.lastStarted:n.lapsedTime,n.lastStarted=0,clearInterval(n.clock)},n.reset=function(){n.stop(),n.lapsedTime=n.lastStarted=0,n.update()},n.getRawTime=function(){return n.lapsedTime+(n.lastStarted?n.now()-n.lastStarted:0)},n.getTime=function(){var t=0,i=0,e=0,r=0,s=n.getRawTime();return t=Math.floor(s/36e5),s%=36e5,i=Math.floor(s/6e4),s%=6e4,e=Math.floor(s/1e3),r=s%1e3,{Hours:n.pad(t,2),Minutes:n.pad(i,2),Seconds:n.pad(e,2),MilliSeconds:n.pad(r,3),Raw:s}},n.pad=function(t,i){var n="0000"+t;return n.substr(n.length-i)},n.now=function(){return(new Date).getTime()}}),d=new i,g=t["class"](function(){d.bind(this),d.context(this,function(t){t.length=0}),Array.call(this);var i=this,n=arguments;t.is.array(arguments[0])&&(n=arguments[0]),t.all(n,function(t){i.push(t)})},{length:{get:function(){return d.get(this,"length")},set:function(t){d.set(this,"length",t)}}},Array),v=t["class"](function(){},{count:{get:function(){return this.getKeys.length}},getKeys:{get:function(){return Object.keys?Object.keys(this):t.map(this,function(t,i){return i})}},getValues:{get:function(){return Object.values?Object.values(this):t.map(this,function(t,i){return t})}},each:function(i){t.all(this,i)},toArray:function(i){var n=[],i=i?i:function(t,i){return t};return t.all(this,function(t,e){n.push(i(t,e))}),n},toDictionary:function(t,i){var n=new p,t=t?t:function(t,i){return i},i=i?i:function(t,i){return t};return this.each(function(e,r){n.add(t(e,r),i(e,r))}),n},toHashSet:function(i){var n=new m,i=i?i:function(t,i){return t};return t.all(this,function(t,e){n.add(i(t,e))}),n}}),p=t["class"](function(){v.call(this)},{add:function(t,i){this[t]=i},clear:function(){var i=this;t.all(i,function(t,n){return i.remove(n)})},containsKey:function(i){return t.is.contains(this.getKeys,function(t){return t==i})},containsValue:function(i){return t.contains(this,function(t){return t==i})},remove:function(t){delete this[t]}},v),m=t["class"](function(){v.call(this)},{add:function(t){this[t]=!0},clear:function(){var i=this;t.all(i,function(t,n){return i.remove(n)})},contains:function(t){return Boolean(this[t])},remove:function(t){delete this[t]}},v);t.fuse(t.lib,{Describe:n,Chain:e,StringParser:r,StyleParser:s,AttrParser:a,PrivateStore:i,Config:o,Model:l,Collection:f,EventManager:u,ViewManager:c,StopWatch:h,ArrayExt:g,Enumerable:v,Dictionary:p,HashSet:m}),"undefined"!=typeof module?module.exports=t:"undefined"!=typeof window&&(window.__=window.iterate=t)}();